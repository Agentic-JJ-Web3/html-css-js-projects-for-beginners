<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Gallery</title>
   
</head>
<body>
    <div class="header">
        <h1>âœ¨ Photo Gallery</h1>
        <p>Discover beautiful moments captured in time</p>
    </div>

    <!-- Upload Section -->
    <div class="upload-container">
        <div class="upload-box" id="uploadBox">
            <div class="upload-icon">ðŸ“¸</div>
            <h3>Upload Your Photos</h3>
            <p>Drag & drop images here or click to browse</p>
            <input type="file" id="fileInput" accept="image/*" multiple style="display: none;">
            <button class="upload-btn" onclick="document.getElementById('fileInput').click()">Choose Files</button>
        </div>
    </div>

    <div class="filter-container">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="nature">Nature</button>
        <button class="filter-btn" data-filter="city">City</button>
        <button class="filter-btn" data-filter="people">People</button>
        <button class="filter-btn" data-filter="abstract">Abstract</button>
        <button class="filter-btn" data-filter="uploaded">My Photos</button>
    </div>

    <div class="gallery" id="gallery">
        <!-- Images will be loaded here by JavaScript -->
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <span class="close-btn" id="closeBtn">&times;</span>
            <span class="nav-btn prev-btn" id="prevBtn">&#8249;</span>
            <span class="nav-btn next-btn" id="nextBtn">&#8250;</span>
            <img class="modal-image" id="modalImage" src="" alt="">
            <div class="modal-caption" id="modalCaption"></div>
        </div>
    </div>

    <script>
        // Sample image data with Unsplash URLs
        const defaultImages = [
            {
                src: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=600&fit=crop',
                caption: 'Mountain Lake Reflection',
                category: 'nature'
            },
            {
                src: 'https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=400&h=500&fit=crop',
                caption: 'City Skyline at Dusk',
                category: 'city'
            },
            {
                src: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=400&h=650&fit=crop',
                caption: 'Portrait in Golden Hour',
                category: 'people'
            },
            {
                src: 'https://images.unsplash.com/photo-1518837695005-2083093ee35b?w=400&h=550&fit=crop',
                caption: 'Ocean Waves',
                category: 'nature'
            },
            {
                src: 'https://images.unsplash.com/photo-1557804506-669a67965ba0?w=400&h=700&fit=crop',
                caption: 'Modern Architecture',
                category: 'city'
            },
            {
                src: 'https://images.unsplash.com/photo-1573164713714-d95e436ab8d6?w=400&h=450&fit=crop',
                caption: 'Colorful Abstract',
                category: 'abstract'
            },
            {
                src: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=600&fit=crop',
                caption: 'Forest Path',
                category: 'nature'
            },
            {
                src: 'https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=400&h=500&fit=crop',
                caption: 'Street Photography',
                category: 'people'
            },
            {
                src: 'https://images.unsplash.com/photo-1480714378408-67cf0d13bc1f?w=400&h=650&fit=crop',
                caption: 'Urban Night Lights',
                category: 'city'
            },
            {
                src: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=550&fit=crop',
                caption: 'Geometric Patterns',
                category: 'abstract'
            },
            {
                src: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=700&fit=crop',
                caption: 'Sunset Mountains',
                category: 'nature'
            },
            {
                src: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=450&fit=crop',
                caption: 'Candid Moment',
                category: 'people'
            }
        ];

        // Load uploaded images from localStorage
        function loadUploadedImages() {
            const stored = localStorage.getItem('uploadedImages');
            return stored ? JSON.parse(stored) : [];
        }

        // Save uploaded images to localStorage
        function saveUploadedImages(uploadedImages) {
            localStorage.setItem('uploadedImages', JSON.stringify(uploadedImages));
        }

        // Combine default and uploaded images
        let uploadedImages = loadUploadedImages();
        let images = [...defaultImages, ...uploadedImages];
        let currentImageIndex = 0;
        let filteredImages = [...images];

        // DOM elements
        const gallery = document.getElementById('gallery');
        const modal = document.getElementById('modal');
        const modalImage = document.getElementById('modalImage');
        const modalCaption = document.getElementById('modalCaption');
        const closeBtn = document.getElementById('closeBtn');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const filterBtns = document.querySelectorAll('.filter-btn');
        const uploadBox = document.getElementById('uploadBox');
        const fileInput = document.getElementById('fileInput');

        // Initialize gallery
        function initGallery() {
            renderGallery(filteredImages);
            setupEventListeners();
        }

        // Render gallery with lazy loading
        function renderGallery(imagesToRender) {
            gallery.innerHTML = '';
            
            imagesToRender.forEach((image, index) => {
                const item = document.createElement('div');
                item.className = 'gallery-item';
                item.dataset.category = image.category;
                item.style.animationDelay = `${index * 0.1}s`;
                
                item.innerHTML = `
                    <img src="${image.src}" alt="${image.caption}" loading="lazy" onerror="this.src=''; this.alt='Image failed to load'; this.style.display='none';">
                    <div class="overlay">
                        <div class="caption">${image.caption}</div>
                    </div>
                    <div class="category">${image.category}</div>
                `;
                
                // Add click event to open modal
                item.addEventListener('click', () => openModal(index));
                
                gallery.appendChild(item);
            });
        }

        // Handle file upload
        function handleFileUpload(files) {
            Array.from(files).forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const newImage = {
                            src: e.target.result,
                            caption: file.name.replace(/\.[^/.]+$/, ""), // Remove file extension
                            category: 'uploaded'
                        };
                        
                        // Add to uploaded images array
                        uploadedImages.push(newImage);
                        
                        // Update main images array
                        images = [...defaultImages, ...uploadedImages];
                        filteredImages = [...images];
                        
                        // Save to localStorage
                        saveUploadedImages(uploadedImages);
                        
                        // Re-render gallery
                        renderGallery(filteredImages);
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        // Setup upload functionality
        function setupUploadFeatures() {
            // File input change event
            fileInput.addEventListener('change', (e) => {
                handleFileUpload(e.target.files);
            });

            // Drag and drop functionality
            uploadBox.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadBox.classList.add('dragover');
            });

            uploadBox.addEventListener('dragleave', (e) => {
                e.preventDefault();
                uploadBox.classList.remove('dragover');
            });

            uploadBox.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadBox.classList.remove('dragover');
                handleFileUpload(e.dataTransfer.files);
            });

            // Click to upload
            uploadBox.addEventListener('click', () => {
                fileInput.click();
            });
        }

        // Filter functionality
        function setupFilterButtons() {
            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Update active button
                    filterBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // Filter images
                    const filter = btn.dataset.filter;
                    if (filter === 'all') {
                        filteredImages = [...images];
                    } else {
                        filteredImages = images.filter(img => img.category === filter);
                    }
                    
                    renderGallery(filteredImages);
                });
            });
        }

        // Modal functions
        function openModal(index) {
            currentImageIndex = index;
            const image = filteredImages[currentImageIndex];
            
            modalImage.src = image.src;
            modalCaption.textContent = image.caption;
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function showPrevImage() {
            currentImageIndex = (currentImageIndex - 1 + filteredImages.length) % filteredImages.length;
            const image = filteredImages[currentImageIndex];
            modalImage.src = image.src;
            modalCaption.textContent = image.caption;
        }

        function showNextImage() {
            currentImageIndex = (currentImageIndex + 1) % filteredImages.length;
            const image = filteredImages[currentImageIndex];
            modalImage.src = image.src;
            modalCaption.textContent = image.caption;
        }

        // Event listeners
        function setupEventListeners() {
            // Modal controls
            closeBtn.addEventListener('click', closeModal);
            prevBtn.addEventListener('click', showPrevImage);
            nextBtn.addEventListener('click', showNextImage);
            
            // Close modal on outside click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
            
            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (!modal.classList.contains('active')) return;
                
                switch(e.key) {
                    case 'Escape':
                        closeModal();
                        break;
                    case 'ArrowLeft':
                        showPrevImage();
                        break;
                    case 'ArrowRight':
                        showNextImage();
                        break;
                }
            });
            
            // Filter buttons
            setupFilterButtons();
            
            // Upload functionality
            setupUploadFeatures();
        }

        // Initialize the gallery when page loads
        document.addEventListener('DOMContentLoaded', initGallery);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'978e2401c608718c',t:'MTc1NjgyNzk5MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
